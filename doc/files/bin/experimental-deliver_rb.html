
<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>File: experimental-deliver.rb</title>
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
  <link rel=StyleSheet href="../.././rdoc-style.css" type="text/css" media="screen" />
  <script type="text/javascript" language="JavaScript">
  <!--
  function popCode(url) {
    window.open(url, "Code", 
          "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
  }
  //-->
  </script>
</head>

<body bgcolor="white">
<table summary="Information on file" width="100%">
 <tr class="title-row">
 <td><table summary="layout" width="100%"><tr>
   <td class="big-title-font" colspan="2">experimental-deliver.rb</td>
   <td align="right"><table summary="layout" cellspacing="0" cellpadding="2">
         <tr>
           <td  class="small-title-font">Path:</td>
           <td class="small-title-font">bin/experimental-deliver.rb</td>
         </tr>
         <tr>
           <td class="small-title-font">Modified:</td>
           <td class="small-title-font">Thu Feb 06 19:50:02 PST 2003</td>
         </tr>
        </table>
    </td></tr></table></td>
  </tr>
</table>
  <!-- banner header -->



<div class="description"><p>
This script delivers a mail message taken from stdin to a mail queue, and
then starts the mail filter program if it isn&#8217;t already running.
</p>
<h3>Usage</h3>
<p>
deliver.rb is invoked from the command line using:
</p>
<pre>
  % deliver.rb &lt;options&gt;
</pre>
<p>
Options are:
</p>
<table>
<tr><td valign="top"><tt>&#8212;load-path</tt>:</td><td>Prepend the given directory to ruby&#8217;s load path.

</td></tr>
<tr><td valign="top"><tt>&#8212;log</tt> <em>filename</em>:</td><td>Log to the given <em>filename</em>. If no log is specified, no logging
occurs.

</td></tr>
<tr><td valign="top"><tt>&#8212;home</tt> <em>directory</em>:</td><td>Specify the home <em>directory</em>. rdeliver will change to this directory
before reading and writing any files. The home directory defaults to the
value of the <tt>HOME</tt> or <tt>LOGDIR</tt> environment variable.

</td></tr>
</table>
<h3>Installation</h3>
<p>
Assuming you have the RubyMail mail classes installed, you typically have
to put something like this in your .forward file:
</p>
<pre>
   |&quot;/usr/local/bin/deliver.rb --log /home/you/.rlog&quot;
</pre>
<p>
This will call rdeliver for each new message you get, and log to
<tt>/home/you/.rlog</tt>.
</p>
<h3>Catastrophic Errors</h3>
<p>
The deliver.rb script is very careful with errors. If there is any problem,
it logs the error to the log file you specify. But if you do not specify a
log file, or the error occurs before the log file is opened, a record of
the error is placed in a file called CATASTROPHIC_DELIVERY_FAILURE in the
home directory. If that fails, the error information is printed to the
standard output in the hopes that it will be part of a bounce message. In
all cases, the exit code 75 is returned, which tells the MTA to re-try the
delivery again.
</p>
</div>

<table summary="Requires" cellpadding="5" width="100%">
<tr><td class="tablesubtitle">Required files</td></tr>
</table>
<div class="name-list">
getoptlong&nbsp; &nbsp;
rfilter/deliver&nbsp; &nbsp;
</div>

<table summary="Methods" cellpadding="5" width="100%">
<tr><td class="tablesubtitle">Methods</td></tr>
</table>
<div class="name-list">
<a href="#M000001">filter_pid</a>&nbsp; &nbsp;
<a href="#M000002">run_filter</a>&nbsp; &nbsp;
</div>




<table summary="Included modules" cellpadding="5" width="100%">
<tr><td class="tablesubtitle">Included modules</td></tr>
</table>
<div class="name-list">
    <span class="method-name"><a href="../../classes/RFilter/Deliver.html">RFilter::Deliver</a></span>
</div>

<table summary="Method list" cellpadding="5" width="100%">
<tr><td class="tablesubtitle">Public Instance methods</td></tr>
</table>
<table summary="method"  width="100%" cellspacing="0" cellpadding="5" border="0">
<tr><td class="methodtitle">
<a name="M000001"></a>
<a href="experimental-deliver_rb.src/M000001.html" target="Code" class="methodtitle"
 onClick="popCode('experimental-deliver_rb.src/M000001.html');return false;">
<b>filter_pid</b>(queue_dir)
</a>
</td></tr>
</table>
<table summary="method"  width="100%" cellspacing="0" cellpadding="5" border="0">
<tr><td class="methodtitle">
<a name="M000002"></a>
<a href="experimental-deliver_rb.src/M000002.html" target="Code" class="methodtitle"
 onClick="popCode('experimental-deliver_rb.src/M000002.html');return false;">
<b>run_filter</b>()
</a>
</td></tr>
</table>

</body>
</html>